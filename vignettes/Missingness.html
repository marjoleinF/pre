<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Marjolein Fokkema" />


<title>Dealing with missing data in fitting prediction rule ensembles</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Dealing with missing data in fitting prediction rule ensembles</h1>
<h4 class="author">Marjolein Fokkema</h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>To deal with missing data, multiple imputation is the golden standard (Schafer &amp; Graham, 2002). With GLMs, the models fitted on each imputed dataset can then be pooled. For non-parameteric methods like prediction rule ensembles, such pooling is more difficult. Little research has been performed on how to best deal with missing data in fitting prediction rule ensembles, but there are currently three options:</p>
<ul>
<li><p>Listwise deletion. Although the default in <code>pre()</code>, this is certainly the least favorable option.</p></li>
<li><p>Single imputation: Perform only a single imputation and fit a prediction rule ensemble on this single dataset. This is likely better than listwise deletion, but likely inferior to multiple imputation, but easy to implement.</p></li>
<li><p>Multiple imputation approach by aggregating ensembles: Create multiple imputed datasets; fit a separate prediction rule ensemble to each of the imputed datasets; aggregate the ensembles into a single final ensemble. In terms of predictive accuracy, this approach will work well. It will, however, yield more complex ensembles than the former two approaches, and the next approach.</p></li>
<li><p>Combining mean imputation with the Missing-In-Attributes approach. According to Josse et al.Â (2019), mean imputation and the Missing-In-Attributes approaches perform well from a prediction perspective. Furthermore, they are computationally inexpensive.</p></li>
</ul>
<p>Below, we provide examples for the first three approaches described above. In future versions of package <strong><code>pre</code></strong>, the mean imputation combined with MIA approach will be implemented.</p>
</div>
<div id="example-predicting-wind-speed" class="section level2">
<h2>Example: Predicting wind speed</h2>
<p>For the examples, we will be predicting Wind speels using the <code>airquality</code> dataset (we focus on predicting the <code>wind</code> variable, because it does not have missing values, while variables <code>Ozone</code> and <code>Solar.R</code> do):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airquality)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(airquality)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;mice&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">md.pattern</span>(airquality, <span class="at">rotate.names =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="listwise-deletion" class="section level2">
<h2>Listwise Deletion</h2>
<p>This option is the default of function <code>pre()</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;pre&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">43</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>airq.ens <span class="ot">&lt;-</span> <span class="fu">pre</span>(Wind <span class="sc">~</span>., <span class="at">data =</span> airquality)</span></code></pre></div>
<pre><code>## Warning in pre(Wind ~ ., data = airquality): Some observations have missing values and have been removed from the data. New sample size is 111.</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>airq.ens</span></code></pre></div>
<pre><code>## 
## Final ensemble with cv error within 1se of minimum: 
##   lambda =  0.5076221
##   number of terms = 2
##   mean cv error (se) = 9.955139 (1.553628)
## 
##   cv error type : Mean-Squared Error
## 
##          rule   coefficient           description
##   (Intercept)   9.034190233                     1
##         rule8   1.743533723           Ozone &lt;= 45
##         Ozone  -0.006180118  6.75 &lt;= Ozone &lt;= 119</code></pre>
<p>With listwise deletion, only 111 out of 153 observations are retained. We obtain a rather sparse ensemble.</p>
</div>
<div id="single-imputation" class="section level2">
<h2>Single Imputation</h2>
<p>Here we apply single imputation by replacing missing values with the mean:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>imp0 <span class="ot">&lt;-</span> airquality</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>imp0<span class="sc">$</span>Solar.R[<span class="fu">is.na</span>(imp0<span class="sc">$</span>Solar.R)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(imp0<span class="sc">$</span>Solar.R, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>imp0<span class="sc">$</span>Ozone[<span class="fu">is.na</span>(imp0<span class="sc">$</span>Ozone)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(imp0<span class="sc">$</span>Ozone, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">43</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>airq.ens.imp0 <span class="ot">&lt;-</span> <span class="fu">pre</span>(Wind <span class="sc">~</span>., <span class="at">data =</span> imp0)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>airq.ens.imp0</span></code></pre></div>
<pre><code>## 
## Final ensemble with cv error within 1se of minimum: 
##   lambda =  0.2751573
##   number of terms = 5
##   mean cv error (se) = 9.757455 (0.7622478)
## 
##   cv error type : Mean-Squared Error
## 
##          rule  coefficient                 description
##   (Intercept)  10.48717592                           1
##         rule2   1.18133248                 Ozone &lt;= 45
##        rule48  -0.56453456  Temp &gt; 72 &amp; Solar.R &lt;= 258
##        rule28  -0.51357673      Temp &gt; 73 &amp; Ozone &gt; 22
##         Ozone  -0.01910646         7 &lt;= Ozone &lt;= 115.6
##        rule40   0.01440472                  Temp &lt;= 81</code></pre>
<p>We obtain a larger number of rules, and slightly lower cross-validated mean squared error. However, this model cannot really be compared with the listwise deletion model, because they are computed over different sets of observations.</p>
</div>
<div id="multiple-imputation" class="section level2">
<h2>Multiple Imputation</h2>
<p>We perform multiple imputation by chained equations, using the predictive mean matching method. We generate 5 imputed datasets:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>imp <span class="ot">&lt;-</span> <span class="fu">mice</span>(airquality, <span class="at">m =</span> <span class="dv">5</span>)</span></code></pre></div>
<p>We create a <code>list</code> with imputed datasets:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>imp1 <span class="ot">&lt;-</span> <span class="fu">complete</span>(imp, <span class="at">action =</span> <span class="st">&quot;all&quot;</span>, <span class="at">include =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>We load the <strong><code>pre</code></strong> library:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;pre&quot;</span>)</span></code></pre></div>
<p>We create a custom function that fits PREs to several datasets contained in a list:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>pre.agg <span class="ot">&lt;-</span> <span class="cf">function</span>(datasets, ...) {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(datasets)) {</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    result[[i]] <span class="ot">&lt;-</span> <span class="fu">pre</span>(datasets[[i]], ...)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  result</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We apply the new function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">43</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>airq.agg <span class="ot">&lt;-</span> <span class="fu">pre.agg</span>(imp1, <span class="at">formula =</span> Wind <span class="sc">~</span> .)</span></code></pre></div>
<p>Note that we can used the ellipsis (<code>...</code>) to pass arguments to <code>pre</code> (see <code>?pre</code> for an overview of arguments that can be specified).</p>
<p>We now define <code>print</code>, <code>summary</code>, <code>predict</code> and <code>coef</code> methods to extract results from the fitted ensemble. Again, we can use the ellipsis (<code>...</code>) to pass arguments to the <code>print</code>, <code>summary</code>, <code>predict</code> and <code>coef</code> methods of function <code>pre</code> (see e.g., <code>?pre:::print.pre</code> for more info):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>print.agg <span class="ot">&lt;-</span> <span class="cf">function</span>(object, ...) {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sink</span>(<span class="st">&quot;NULL&quot;</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(object)) {</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    result[[i]] <span class="ot">&lt;-</span> <span class="fu">print</span>(object[[i]], ...)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sink</span>()</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(result)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print.agg</span>(airq.agg) <span class="do">## results suppressed for space considerations</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>summary.agg <span class="ot">&lt;-</span> <span class="cf">function</span>(object, ...) {</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(object)) <span class="fu">summary</span>(object[[i]], ...)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="fu">summary.agg</span>(airq.agg) <span class="do">## results suppressed for space considerations</span></span></code></pre></div>
<p>For averaging over predictions, there is only one option for continuous outcomes. For non-continuous outcomes, we can average over the linear predictor, or over the predicted values on the scale of the response. I am not sure which would be more appropriate; the resulting predicted values will not be identical, but highly correlated, though.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>predict.agg <span class="ot">&lt;-</span> <span class="cf">function</span>(object, newdata, ...) {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowMeans</span>(<span class="fu">sapply</span>(object, predict, <span class="at">newdata =</span> newdata, ...))</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>agg_preds <span class="ot">&lt;-</span> <span class="fu">predict.agg</span>(airq.agg, <span class="at">newdata =</span> airquality[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, ])</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>agg_preds</span></code></pre></div>
<pre><code>##        1        2        3        4 
## 10.42757 10.59272 10.93324 11.00302</code></pre>
<p>Finally, the <code>coef</code> method should return the averaged / aggregated final PRE. That is, it returns:</p>
<ol style="list-style-type: decimal">
<li><p>One averaged intercept;</p></li>
<li><p>All rules and linear terms, with their coefficients scaled by the number of datasets;</p></li>
<li><p>In presence of identical rules and linear terms, it aggregates those rules and their coefficients into one rule / term, and adds together the scaled coefficients.</p></li>
</ol>
<p>Note that linear terms that do not have the same winsorizing points will not be aggregated. Note that the labels of rules and variables may overlap between different datasets (e.g., the label <code>rule 12</code> may appear multiple times in the aggregated ensemble, but each <code>rule 12</code> will have different conditions).</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>coef.agg <span class="ot">&lt;-</span> <span class="cf">function</span>(object, ...) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  coefs <span class="ot">&lt;-</span> <span class="fu">coef</span>(object[[<span class="dv">1</span>]], ...)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  coefs <span class="ot">&lt;-</span> coefs[coefs<span class="sc">$</span>coefficient <span class="sc">!=</span> <span class="dv">0</span>, ]</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(object)) {</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    coefs_tmp <span class="ot">&lt;-</span> <span class="fu">coef</span>(object[[i]], ...)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    coefs <span class="ot">&lt;-</span> <span class="fu">rbind</span>(coefs, coefs_tmp[coefs_tmp<span class="sc">$</span>coefficient <span class="sc">!=</span> <span class="dv">0</span>, ])</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Divide coefficients by the number of datasets:</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  coefs<span class="sc">$</span>coefficient <span class="ot">&lt;-</span> coefs<span class="sc">$</span>coefficient <span class="sc">/</span> <span class="fu">length</span>(object)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Identify identical rules:</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  duplicates <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">duplicated</span>(coefs<span class="sc">$</span>description))</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> duplicates) {</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    first_match <span class="ot">&lt;-</span> <span class="fu">which</span>(coefs<span class="sc">$</span>description <span class="sc">==</span> coefs<span class="sc">$</span>description[i])[<span class="dv">1</span>]</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Add the coefficients:</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    coefs<span class="sc">$</span>coefficient[first_match] <span class="ot">&lt;-</span> </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>      coefs<span class="sc">$</span>coefficient[first_match] <span class="sc">+</span> coefs<span class="sc">$</span>coefficient[i]</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Remove duplicates:</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  coefs <span class="ot">&lt;-</span> coefs[<span class="sc">-</span>duplicates, ]</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Check if there are- duplicate linear terms left and repeat:</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  duplicates <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">duplicated</span>(coefs<span class="sc">$</span>rule))</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> duplicates) {</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    first_match <span class="ot">&lt;-</span> <span class="fu">which</span>(coefs<span class="sc">$</span>rule <span class="sc">==</span> coefs<span class="sc">$</span>rule[i])[<span class="dv">1</span>]</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    coefs<span class="sc">$</span>coefficient[first_match] <span class="ot">&lt;-</span> </span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>      coefs<span class="sc">$</span>coefficient[first_match] <span class="sc">+</span> coefs<span class="sc">$</span>coefficient[i]</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  coefs <span class="ot">&lt;-</span> coefs[<span class="sc">-</span>duplicates, ]</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Return results:</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  coefs</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="fu">coef.agg</span>(airq.agg)</span></code></pre></div>
<pre><code>##           rule  coefficient                 description
## 65 (Intercept)  9.433571984                           1
## 29      rule32  0.097328032      Temp &gt; 73 &amp; Ozone &gt; 23
## 3        rule3  0.968746033                 Ozone &lt;= 45
## 7        rule7  0.040507812 Ozone &gt; 14 &amp; Solar.R &lt;= 238
## 66       Ozone -0.006089757         7 &lt;= Ozone &lt;= 115.6
## 6        rule6  0.074835353                 Ozone &lt;= 59
## 25      rule26 -0.067771974      Temp &gt; 63 &amp; Ozone &gt; 14
## 17      rule17 -0.038092316      Temp &gt; 75 &amp; Ozone &gt; 47
## 1        rule1  0.090749273                 Ozone &lt;= 21
## 58      rule62 -0.277510244 Ozone &gt; 45 &amp; Solar.R &lt;= 275
## 36      rule39 -0.046938032 Ozone &gt; 14 &amp; Solar.R &lt;= 201
## 40      rule43 -0.035213431  Temp &gt; 72 &amp; Solar.R &lt;= 255
## 51       rule5  0.031821453                 Ozone &lt;= 52
## 10      rule10  0.070056367                  Temp &lt;= 73
## 19      rule22  0.066962331                 Ozone &lt;= 63
## 14      rule15  0.001044073 Ozone &lt;= 45 &amp; Solar.R &gt; 212</code></pre>
<p>We have obtained a final ensemble of 15 terms.</p>
</div>
<div id="comparing-accuracy-and-sparsity" class="section level2">
<h2>Comparing accuracy and sparsity</h2>
<p>We compare performance using 10-fold cross validation. We evaluate predictive accuracy and the number of selected rules. We only evaluate accuracy for observations that have no missing values.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">43</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>fold_ids <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>k, <span class="at">size =</span> <span class="fu">nrow</span>(airquality), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>observed <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k) {</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Separate training and test data</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  test <span class="ot">&lt;-</span> airquality[fold_ids <span class="sc">==</span> i, ]</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  test <span class="ot">&lt;-</span> test[<span class="sc">!</span><span class="fu">is.na</span>(test<span class="sc">$</span>Ozone), ]</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  test <span class="ot">&lt;-</span> test[<span class="sc">!</span><span class="fu">is.na</span>(test<span class="sc">$</span>Solar.R), ]</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  observed <span class="ot">&lt;-</span> <span class="fu">c</span>(observed, test<span class="sc">$</span>Wind)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>}  </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>preds <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(observed)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>preds<span class="sc">$</span>LWD <span class="ot">&lt;-</span> preds<span class="sc">$</span>SI <span class="ot">&lt;-</span> preds<span class="sc">$</span>MI <span class="ot">&lt;-</span> preds<span class="sc">$</span>observed</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>nterms <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> k, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(nterms) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;LWD&quot;</span>, <span class="st">&quot;SI&quot;</span>, <span class="st">&quot;MI&quot;</span>)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>row <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>k) {</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">1</span>) row <span class="ot">&lt;-</span> row <span class="sc">+</span> <span class="fu">nrow</span>(test)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Separate training and test data</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  train <span class="ot">&lt;-</span> airquality[fold_ids <span class="sc">!=</span> i, ]</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  test <span class="ot">&lt;-</span> airquality[fold_ids <span class="sc">==</span> i, ]</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  test <span class="ot">&lt;-</span> test[<span class="sc">!</span><span class="fu">is.na</span>(test<span class="sc">$</span>Ozone), ]</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  test <span class="ot">&lt;-</span> test[<span class="sc">!</span><span class="fu">is.na</span>(test<span class="sc">$</span>Solar.R), ]</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Fit and evaluate listwise deletion</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>  premod <span class="ot">&lt;-</span> <span class="fu">pre</span>(Wind <span class="sc">~</span> ., <span class="at">data =</span> train)</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>  preds<span class="sc">$</span>LWD[row<span class="sc">:</span>(row<span class="sc">+</span><span class="fu">nrow</span>(test)<span class="sc">-</span><span class="dv">1</span>)] <span class="ot">&lt;-</span> <span class="fu">predict</span>(premod, <span class="at">newdata =</span> test)</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">print</span>(premod)</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>  nterms[i, <span class="st">&quot;LWD&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">nrow</span>(tmp) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Fit and evaluate single imputation</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>  imp0 <span class="ot">&lt;-</span> train</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>  imp0<span class="sc">$</span>Solar.R[<span class="fu">is.na</span>(imp0<span class="sc">$</span>Solar.R)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(imp0<span class="sc">$</span>Solar.R, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>  imp0<span class="sc">$</span>Ozone[<span class="fu">is.na</span>(imp0<span class="sc">$</span>Ozone)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(imp0<span class="sc">$</span>Ozone, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>  premod.imp0 <span class="ot">&lt;-</span> <span class="fu">pre</span>(Wind <span class="sc">~</span>., <span class="at">data =</span> imp0)</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>  imp1 <span class="ot">&lt;-</span> test</span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>  imp1<span class="sc">$</span>Solar.R[<span class="fu">is.na</span>(imp1<span class="sc">$</span>Solar.R)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(imp0<span class="sc">$</span>Solar.R, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>  imp1<span class="sc">$</span>Ozone[<span class="fu">is.na</span>(imp1<span class="sc">$</span>Ozone)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(imp0<span class="sc">$</span>Ozone, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>  preds<span class="sc">$</span>SI[row<span class="sc">:</span>(row<span class="sc">+</span><span class="fu">nrow</span>(test)<span class="sc">-</span><span class="dv">1</span>)] <span class="ot">&lt;-</span> <span class="fu">predict</span>(premod.imp0, <span class="at">newdata =</span> imp1)  </span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">print</span>(premod.imp0)</span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>  nterms[i, <span class="st">&quot;SI&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">nrow</span>(tmp) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Perform multiple imputation</span></span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>  imp <span class="ot">&lt;-</span> <span class="fu">mice</span>(train, <span class="at">m =</span> <span class="dv">5</span>)</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>  imp1 <span class="ot">&lt;-</span> <span class="fu">complete</span>(imp, <span class="at">action =</span> <span class="st">&quot;all&quot;</span>, <span class="at">include =</span> <span class="cn">FALSE</span>)</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>  airq.agg <span class="ot">&lt;-</span> <span class="fu">pre.agg</span>(imp1, <span class="at">formula =</span> Wind <span class="sc">~</span> .)</span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>  preds<span class="sc">$</span>MI[row<span class="sc">:</span>(row<span class="sc">+</span><span class="fu">nrow</span>(test)<span class="sc">-</span><span class="dv">1</span>)] <span class="ot">&lt;-</span> <span class="fu">predict.agg</span>(airq.agg, <span class="at">newdata =</span> test)</span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>  nterms[i, <span class="st">&quot;MI&quot;</span>] <span class="ot">&lt;-</span> <span class="fu">nrow</span>(<span class="fu">coef.agg</span>(airq.agg)) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(preds, <span class="cf">function</span>(x) <span class="fu">mean</span>((preds<span class="sc">$</span>observed <span class="sc">-</span> x)<span class="sc">^</span><span class="dv">2</span>)) <span class="do">## MSE</span></span></code></pre></div>
<pre><code>##  observed        MI        SI       LWD 
##  0.000000  9.462657 10.087872  9.824913</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(preds, <span class="cf">function</span>(x) <span class="fu">sd</span>((preds<span class="sc">$</span>observed <span class="sc">-</span> x)<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">nrow</span>(preds))) <span class="do">## SE of MSE</span></span></code></pre></div>
<pre><code>## observed       MI       SI      LWD 
## 0.000000 1.472118 1.538254 1.499660</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(preds<span class="sc">$</span>observed) <span class="do">## benchmark: Predict mean for all</span></span></code></pre></div>
<pre><code>## [1] 12.65732</code></pre>
<p>Interestingly, we see that all three methods yield similar predictions and accuracy, and explain about 20% of variance in the response. Multiple imputation performed best, followed by listwise deletion, followed by single imputation. Taking into account the standard errors, however, these differences are not significant. Also, this simple evaluation on only a single dataset should not be taken too seriously. The better performance of multiple imputation does come at the cost of increased complexity:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(nterms, <span class="at">main =</span> <span class="st">&quot;Number of selected terms </span><span class="sc">\n</span><span class="st">per missing-data method&quot;</span>,</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">cex.main =</span> .<span class="dv">8</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>In line with findings of Josse et al.Â (2019), we expect MIA to work better for rules than mean imputation. In future versions of package <strong><code>pre</code></strong>, we plan to implement MIA (for the rules) and combine it with mean imputation (for the linear terms).</p>
</div>
<div id="session-info" class="section level2">
<h2>Session info</h2>
<p>In case you obtained different results, these results were obtained using the following:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.1.3 (2022-03-10)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 19042)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=Dutch_Netherlands.1252  LC_CTYPE=Dutch_Netherlands.1252   
## [3] LC_MONETARY=Dutch_Netherlands.1252 LC_NUMERIC=C                      
## [5] LC_TIME=Dutch_Netherlands.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] pre_1.0.3   mice_3.14.0
## 
## loaded via a namespace (and not attached):
##  [1] shape_1.4.6        tidyselect_1.1.2   xfun_0.29          bslib_0.3.1       
##  [5] inum_1.0-4         purrr_0.3.4        splines_4.1.3      lattice_0.20-45   
##  [9] vctrs_0.3.8        generics_0.1.2     htmltools_0.5.2    yaml_2.2.1        
## [13] utf8_1.2.2         survival_3.3-1     rlang_1.0.2        jquerylib_0.1.4   
## [17] pillar_1.7.0       glue_1.6.2         withr_2.5.0        DBI_1.1.2         
## [21] plotmo_3.6.1       foreach_1.5.2      lifecycle_1.0.1    stringr_1.4.0     
## [25] MatrixModels_0.5-0 mvtnorm_1.1-3      codetools_0.2-18   evaluate_0.15     
## [29] knitr_1.38         fastmap_1.1.0      fansi_1.0.3        highr_0.9         
## [33] broom_0.7.12       Rcpp_1.0.8.3       backports_1.4.1    plotrix_3.8-2     
## [37] jsonlite_1.8.0     TeachingDemos_2.12 digest_0.6.27      stringi_1.7.6     
## [41] dplyr_1.0.8        grid_4.1.3         cli_3.2.0          tools_4.1.3       
## [45] magrittr_2.0.2     sass_0.4.1         glmnet_4.1-3       tibble_3.1.6      
## [49] Formula_1.2-4      crayon_1.5.1       tidyr_1.2.0        pkgconfig_2.0.3   
## [53] partykit_1.2-15    libcoin_1.0-9      ellipsis_0.3.2     Matrix_1.4-1      
## [57] assertthat_0.2.1   rmarkdown_2.13     rstudioapi_0.13    iterators_1.0.14  
## [61] earth_5.3.1        rpart_4.1.16       R6_2.5.1           compiler_4.1.3</code></pre>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<p>Josse, J., Prost, N., Scornet, E., &amp; Varoquaux, G. (2019). On the consistency of supervised learning with missing values. <em>arXiv preprint arXiv:1902.06931</em>. <a href="https://arxiv.org/abs/1902.06931" class="uri">https://arxiv.org/abs/1902.06931</a></p>
<p>Miles, A. (2016). Obtaining predictions from models fit to multiply imputed data. <em>Sociological Methods &amp; Research, 45</em>(1), 175-185. <a href="https://doi.org/10.1177/0049124115610345" class="uri">https://doi.org/10.1177/0049124115610345</a></p>
<p>Schafer, J. L., &amp; Graham, J. W. (2002). Missing data: our view of the state of the art. <em>Psychological Methods, 7</em>(2), 147. <a href="https://doi.org/10.1037/1082-989X.7.2.147" class="uri">https://doi.org/10.1037/1082-989X.7.2.147</a></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
